<div class="page-builder-container ngx-page-builder" cdkDropListGroup>
  <toolbar></toolbar>
  <div
    class="components"
    id="blockSourceList"
    cdkDropList
    [cdkDropListData]="sources"
    [cdkDropListSortingDisabled]="true"
  >
    <div class="sticky-top">
      @for (item of sources; track $index) {
      <div
        class="tool"
        cdkDrag
        [cdkDragData]="item"
        [innerHTML]="item.icon | safeHtml"
        [title]="item.title"
        (click)="preventDefault()"
      ></div>
      }
    </div>
  </div>
  <div
    class="page-container full-height"
    (click)="pageBuilderService.deSelectBlock()"
    (scroll)="blockSelector.updatePosition()"
  >
    <div
      [hidden]="pageBuilderService.currentPageIndex() < 0"
      class="paper {{ pageBuilderService.pageInfo.config.size }} {{
        pageBuilderService.pageInfo.config.orientation
      }}"
    >
      <div
        class="page-header"
        #PageHeader
        [class.show-outlines]="pageBuilderService.showOutlines"
        cdkDropList
        [cdkDropListData]="pageBuilderService.currentPage.headerItems"
        [class.is-empty]="pageBuilderService.currentPage.headerItems.length == 0"
        (cdkDropListDropped)="onDrop($event, 'header')"
      >
        <div class="placeholder" *cdkDragPlaceholder></div>
      </div>

      <div
        class="page-body"
        #PageBody
        [class.show-outlines]="pageBuilderService.showOutlines"
        cdkDropList
        [cdkDropListData]="pageBuilderService.currentPage.bodyItems"
        (cdkDropListDropped)="onDrop($event, 'body')"
      >
        <div class="placeholder" *cdkDragPlaceholder></div>
      </div>
      <div
        class="page-footer"
        #PageFooter
        [class.show-outlines]="pageBuilderService.showOutlines"
        cdkDropList
        [class.is-empty]="pageBuilderService.currentPage.footerItems.length == 0"
        [cdkDropListData]="pageBuilderService.currentPage.footerItems"
        (cdkDropListDropped)="onDrop($event, 'footer')"
      >
        <div class="placeholder" *cdkDragPlaceholder></div>
      </div>
    </div>
    <block-selector #blockSelector />
  </div>

  <block-properties class="properties"></block-properties>
</div>
